"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[53608],{984556:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(495231);async function s(e,t){let{api:a}=(0,i.t)(),s=(0,i.u)();try{let i=new Date().getTime(),n=await a.post("/ads/v4/business_entities",e,!1);return s.success("getMultipleBizEntityProperties",t),s.latency("getMultipleBizEntityProperties",new Date().getTime()-i,t),n}catch(e){throw s.failure("getMultipleBizEntityProperties",t),e}}(0,i.u)()},41003:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(495231);async function s(e,t){let{api:a}=(0,i.t)(),s=(0,i.u)();try{let i=new Date().getTime(),n=await a.patch("/ads/v4/business_entities",e,!1);return s.success("setMultipleBizEntityProperties",t),s.latency("setMultipleBizEntityProperties",new Date().getTime()-i,t),n}catch(e){throw s.failure("setMultipleBizEntityProperties",t),e}}(0,i.u)()},835157:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(383399);let s=()=>{let e=(0,i.Z)();return!!e.isAuth&&e.isPartner}},53608:(e,t,a)=>{a.d(t,{FE:()=>Z,lG:()=>R,d9:()=>B});var i=a(667294),s=a(616550),n=a(835157),r=a(957583),l=a(297728),u=a(383399),o=a(415787);let d=()=>{let e=(0,u.Z)(),{checkExperiment:t}=(0,l.F)(),a=(0,n.Z)()&&t("web_m10n_business_reporting_business_entity_service").anyEnabled,[s,d]=(0,i.useState)({isReady:!1}),c=(0,i.useCallback)(async({entityId:e,actingBusinessId:t,favorites:i})=>{a&&(await (0,r.yo)({entityId:e,actingBusinessId:t,favorites:i}),d(e=>{let a={...e,actingBusinessId:t};return i&&(a.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[i.actingBusinessId]:{advertiserId:i.adAccounts}}}),a}))},[a]);return(0,i.useEffect)(()=>{a&&e.isAuth&&!s.isReady&&(async()=>{let t=!1;try{let t=await (0,r.SF)({entityId:e.id});d(e=>({...e,...t}))}catch{t=!0}finally{(0,o.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:t}}),d(e=>({...e,isReady:!0}))}})()},[s.isReady,a,e]),{accountSwitcherConfig:s,setConfig:c}};var c=a(545007),m=a(366513),p=a(442279),_=a(689567);let f=(0,p.P1)(_.Z,({viewerIsProfileOwnerOrProfileManager:e})=>e??void 0);var g=a(501912),y=a(801621),h=a(467403);let w=()=>{let e=(0,u.Z)(),t=(0,i.useRef)(e);t.current=e;let a=(0,c.I0)(),s=(0,g.Z)(),n=(0,i.useRef)(s);n.current=s;let l=(0,c.v9)(f),o=l?.data||void 0,d=(0,i.useRef)(o);d.current=o,(0,i.useEffect)(()=>{(async()=>{if(t.current.isAuth&&void 0===l.data){let e=await (0,r.bG)({user_id:t.current.id});if(void 0!==e&&void 0===d.current){let i=(0,y.D3)(t.current,e?.id??"",n)||t.current.isAuth&&t.current.username===e?.username;a((0,m.Z)(!!i))}}})()},[t,d,a,n,l]);let p=(0,h.rc)(o);return{viewerIsProfileOwnerOrProfileManagerData:o,previousIsViewerProfileOwnerOrProfileManager:p}};var A=a(200892),v=a(573706),b=a(498490),S=a(282999),I=a(812477),N=a(868808),O=a(668868),E=a(553740),U=a(785893);let{Provider:C,useHook:B}=(0,b.Z)("AccountSwitcherContext"),R=e=>e.search&&(0,N.mB)(e.search).advertiserId,Z=({children:e})=>{let t=(0,s.TH)(),{params:{userBizId:a,businessHierarchyId:o,advertiserId:c,username:m}}=(0,s.$B)(),{catalogId:p}=(0,E.Z)(),_=R(t),f=(0,u.Z)(),{viewerIsProfileOwnerOrProfileManagerData:g,previousIsViewerProfileOwnerOrProfileManager:y}=w(),{checkExperiment:b}=(0,l.F)(),N=b("web_m10n_business_access_catalogs").anyEnabled,[B,Z]=(0,i.useState)(""),[T,P]=(0,i.useState)(null),[L,M]=(0,i.useState)(!1),[z,F]=(0,i.useState)(null),G=new URLSearchParams(t.search),[D,k]=(0,i.useState)(G.has("actingBusinessId")?null:{id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||""}),[x,H]=(0,i.useState)(!1),W=(0,n.Z)(),{logContextEvent:j}=(0,v.v)(),{accountSwitcherConfig:q,setConfig:K}=d();(0,i.useEffect)(()=>{o?Z(o):Z("")},[o]);let $=(0,i.useCallback)(async({id:e,username:t})=>{let a=await (0,r.bG)({user_id:e,username:t});a&&F({type:e?A.Oz.BUSINESS_ACCOUNT:A.Oz.PROFILE,id:e||a.id,name:a.full_name,img:a.image_medium_url,username:t,ownerImg:a.image_medium_url,ownerName:a.full_name,actingBusinessFullName:D?.name||a.full_name}),H(!1)},[D]),V=(0,h.rc)(m);(0,i.useEffect)(()=>{(0,I.Z)(t)&&z&&V!==m&&m===f.username&&($({username:f.username}),k({id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||""}),P({type:A.nt,id:f.id}))},[t,V,$,z,m,f.fullName,f.id,f.imageMediumUrl,f.username]),(0,i.useEffect)(()=>{let e=async({businessId:e,assetId:a})=>{if(!e){H(!1);return}let i=N&&(0,S.Bg)(t)?"CATALOG":"AD_ACCOUNT";try{let e={asset:{name:""},type:i};if(f.isAuth){let{data:{data:t={[a]:e}}={}}=await (0,O.pI)({businessId:D?.id||f.id,assetIds:[a],resourceType:i})||{},{asset:s,type:n}=t[a]||e;F({id:a,name:"CATALOG"===i?t[a].owner.full_name:s.name,img:t[a].owner.image_medium_url,type:n,ownerImg:t[a].owner.image_medium_url,ownerName:t[a].owner.full_name,actingBusinessFullName:D?.name||t[a].owner.full_name})}}catch{F({id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||"",type:A.Oz.BUSINESS_ACCOUNT,ownerImg:f.imageMediumUrl||"",ownerName:f.fullName||"",actingBusinessFullName:f.fullName||""})}H(!1)},i=async({id:e})=>{let t=await (0,r.p)({hierarchyId:e});F({id:e,name:t?.data?t.data.name:"",img:t?.data?t.data.img_medium_url:"",type:A.Oz.BUSINESS_HIERARCHY,ownerImg:t?.data?t.data.img_medium_url:"",ownerName:t?.data?t.data.name:"",actingBusinessFullName:t?.data?t.data.name:""}),H(!1)};if(f.isAuth&&W){let s=z&&z.username&&z.username!==m,n=!0===g&&g!==y;if((!z||s||n)&&!x&&D){let s=(0,S.z6)(t)||(0,S.h3)(t),n=c||!!_&&!s||(0,S.Bg)(t)&&N;H(!0),o?i({id:o}):a?$({id:a}):(0,I.Z)(t)&&m&&g?$({username:m}):n?e({businessId:f.id,assetId:c||_||p||""}):z&&z.id===f.id||(F({type:A.Oz.BUSINESS_ACCOUNT,id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||"",ownerImg:f.imageMediumUrl||"",ownerName:f.fullName||"",actingBusinessFullName:f.fullName||""}),H(!1))}}},[z,f,o,a,m,c,_,D,W,t,$,x,g,y,p,N]);let X=(0,i.useMemo)(()=>({activePanel:T,selectedHierarchyId:B,switcherOpen:L,openAccountSwitcher:()=>{if(j({event_type:101,view_type:608,component:14346}),!T){if((0,S.z6)(t))P({type:A.v8});else{let e=new URLSearchParams(t.search).get("actingBusinessId");P({type:A.nt,id:e??D?.id})}}M(!0)},closeAccountSwitcher:()=>{P(z&&!(0,S.z6)(t)?{type:A.nt,id:D?.id}:{type:A.v8}),M(!1)},openAssetPanel:e=>{P({type:A.nt,id:e})},closeAssetPanel:()=>{P(z&&!(0,S.z6)(t)?{type:A.nt,id:D?.id}:{type:A.v8})},activateBusinessPanel:()=>{P({type:A.v8})},actingBusiness:D,selectedAccount:z,setSelectedAccount:F,setActingBusiness:k,accountSwitcherConfig:q,setConfig:K}),[T,B,L,D,z,q,K,j,t]);return(0,U.jsx)(C,{value:X,children:e})}},957583:(e,t,a)=>{a.d(t,{IT:()=>o,SF:()=>p,WP:()=>d,bG:()=>m,p:()=>c,yo:()=>_});var i=a(984556),s=a(41003),n=a(252071),r=a(200892),l=a(400416),u=a(719641);let o=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:r.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),d=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:r.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),c=async({hierarchyId:e})=>(await (0,l.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`})).resource_response,m=async({user_id:e,username:t})=>{if(!t&&!e)return null;let{resource_response:{data:a}}=await n.Z.create("UserResource",{user_id:e,username:t}).callGet();return a},p=async({entityId:e})=>{let t=(await (0,i.Z)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]))[0];return t&&t.properties?t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG:{}},_=async({entityId:e,actingBusinessId:t,favorites:a})=>{let i={};(0,u.k)(t)||(i.actingBusinessId=t),a&&(i.favoriteAdAccounts={favoriteAdAccountsMap:{[a.actingBusinessId]:{advertiserId:a.adAccounts}}}),Object.keys(i).length>0&&await (0,s.Z)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:i}}])}},812477:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(616550);let s=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/collage-creation-tool","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/for-you","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/inbox","/install-shuffles","/invited","/jobs","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-data","/robots.txt","/safe-redirect","/search","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-image-lens-history","/upload-lens-image","/upload-profile-image","/upload-shuffle-draft","/verified","/verify","/videos","/web-custom-svg","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function n(e){return!!(0,i.LX)(e.pathname,{path:"/:username/",exact:!0})&&!s.includes(e.pathname.replace(/\/$/,""))}},366513:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){return{type:"UPDATE_VIEWER_IS_PROFILE_OWNER_OR_PROFILE_MANAGER",payload:e}}},689567:(e,t,a)=>{a.d(t,{Z:()=>i});let i=({businessAccess:e})=>e??{}},553740:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(616550);function s(){let{catalog_id:e,feed_profile_id:t,workflow_id:a,product_group_id:s,event_type_id:n,supplemental_feed_profile_id:r}=(0,i.UO)();return{catalogId:e,feedProfileId:t,workflowId:a,productGroupId:s,eventTypeId:n,supplementalFeedProfileId:r}}},719641:(e,t,a)=>{function i(e){return null==e}function s(e){return!i(e)}a.d(t,{G:()=>s,k:()=>i})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/53608-202474e30d80bbb7.mjs.map